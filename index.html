<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูุชุงุจ ุงูุณูุฑุฉ ุงูุชูุงุนูู</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="app-header">
    <h1>ูุชุงุจ ุงูุณูุฑุฉ ุงููุจููุฉ</h1>
    <div class="header-search">
      <input type="search" id="globalSearch" placeholder="ุงุจุญุซ ูู ุงูุฃุญุฏุงุซ ูุงููุตูุต ูุงูุฃูุงูู">
      <div id="globalResults" class="search-dropdown hidden"></div>
    </div>
    <div class="header-actions">
      <button id="addEventBtn">+ ุญุฏุซ</button>
      <button id="manageBiosBtn">ุงูุชุฑุงุฌู</button>
      <button id="managePlacesBtn">ุงูุฃูุงูู</button>
      <button id="importExportBtn">ุงุณุชูุฑุงุฏ/ุชุตุฏูุฑ</button>
      <button id="manualSaveBtn">ุญูุธ</button>
    </div>
  </header>
  <div class="app-shell">
    <aside class="timeline-panel">
      <div class="event-form">
        <input id="formEventId" type="text">
        <input id="formEventTitle" type="text">
        <input id="formEventYear" type="number">
        <div class="form-actions">
          <button id="saveEventFormBtn" title="ุญูุธ ุงูุญุฏุซ" aria-label="ุญูุธ ุงูุญุฏุซ">๐พ</button>
          <button type="button" id="clearEventFormBtn" title="ุชูุฑูุบ" aria-label="ุชูุฑูุบ">โ</button>
          <button type="button" id="loadSelectedEventBtn" title="ุชุญููู ุงูุญุฏุซ ุงูุญุงูู" aria-label="ุชุญููู ุงูุญุฏุซ ุงูุญุงูู">โฌ</button>
        </div>
      </div>
      <div id="timeline" class="timeline-list"></div>
    </aside>
    <main class="content-panel">
      <section class="event-overview" aria-hidden="true">
        <h2 id="eventTitle" class="event-title">ุงุฎุชุฑ ุญุฏุซุงู ูู ุงูุฎุท ุงูุฒููู</h2>
      </section>
      <section class="sources-panel">
        <div class="sources-header">
          <h3 id="sourcePanelTitle">ุงููุตุงุฏุฑ</h3>
          <div id="sourceTabs" class="source-tabs"></div>
          <div class="source-actions">
            <button id="addSourceBtn">+ ูุตุฏุฑ</button>
            <button id="removeSourceBtn">ุญุฐู ุงููุตุฏุฑ</button>
          </div>
        </div>
        <div class="source-meta">
          <label for="sourceBookInput">ุงุณู ุงููุตุฏุฑ ุงูุญุงูู</label>
          <div class="source-meta-controls">
            <input type="text" id="sourceBookInput" placeholder="ุฃุฏุฎู ุงุณู ุงููุชุงุจ">
            <button id="saveSourceBookBtn">ุญูุธ ุงูุงุณู</button>
          </div>
        </div>
        <article class="event-text">
          <textarea id="eventTextEditor" placeholder="ุงูุชุจ ูุต ุงููุตุฏุฑ ููุง"></textarea>
          <div id="eventTextPreview" class="event-preview">
            <p>ุณุชุธูุฑ ูุตูุต ุงูุณูุฑุฉ ูุน ุงูุฑูุงุจุท ุงูุฐููุฉ ููุง.</p>
          </div>
        </article>
      </section>
    </main>
  </div>

  <div id="personModal" class="modal">
    <div class="modal-card">
      <button class="modal-close" data-close="personModal">ร</button>
      <img id="personImage" alt="" class="modal-image">
      <div class="modal-body">
        <label>ุงูุงุณู</label>
        <input type="text" id="personNameInput">
        <label>ูุจุฐุฉ ูุฎุชุตุฑุฉ</label>
        <textarea id="personShortInput" rows="2"></textarea>
        <label>ูุต ูุงูู</label>
        <textarea id="personFullInput" rows="4"></textarea>
        <label>ุฑุงุจุท ุงูุตูุฑุฉ</label>
        <input type="text" id="personImageInput">
        <div class="modal-actions">
          <button id="savePersonBtn">ุญูุธ</button>
        </div>
      </div>
    </div>
  </div>

  <div id="placeModal" class="modal">
    <div class="modal-card">
      <button class="modal-close" data-close="placeModal">ร</button>
      <img id="placeImage" alt="" class="modal-image">
      <div class="modal-body">
        <label>ุงุณู ุงูููุงู</label>
        <input type="text" id="placeNameInput">
        <label>ุงููุตู</label>
        <textarea id="placeDescInput" rows="3"></textarea>
        <label>ุฑุงุจุท ุงูุตูุฑุฉ</label>
        <input type="text" id="placeImageInput">
        <div class="modal-actions">
          <button id="savePlaceBtn">ุญูุธ</button>
        </div>
      </div>
    </div>
  </div>

  <div id="eventModal" class="modal">
    <div class="modal-card">
      <button class="modal-close" data-close="eventModal">ร</button>
      <div class="modal-body">
        <h3>ุฅุถุงูุฉ / ุชุนุฏูู ุญุฏุซ</h3>
        <label>ุงููุนุฑู</label>
        <input type="text" id="eventIdInput" placeholder="ูุซุงู: badr">
        <label>ุงูุนููุงู</label>
        <input type="text" id="eventTitleInput">
      <label>ุงูุณูุฉ ุงููุฌุฑูุฉ</label>
      <input type="number" id="eventYearInput">
      <label>ุชุฑุชูุจ ุงูุนุฑุถ (ุฑูู)</label>
      <input type="number" id="eventOrderInput">
      <label>ุงููููุงุช ุงูููุชุงุญูุฉ (ุงูุตููุง ุจููุงุตู)</label>
        <input type="text" id="eventTagsInput">
        <label>ุงูููุงุญุธุงุช</label>
        <textarea id="eventNotesInput" rows="2"></textarea>
        <label>ุงุณู ุงููุตุฏุฑ ุงูุฃูู</label>
        <input type="text" id="eventSourceBookInput">
        <label>ูุต ุงููุตุฏุฑ ุงูุฃูู</label>
        <textarea id="eventSourceTextInput" rows="4"></textarea>
        <div class="modal-actions">
          <button id="saveEventModalBtn">ุญูุธ ุงูุญุฏุซ</button>
        </div>
      </div>
    </div>
  </div>

  <div id="importExportModal" class="modal">
    <div class="modal-card">
      <button class="modal-close" data-close="importExportModal">ร</button>
      <div class="modal-body">
        <h3>ุงุณุชูุฑุงุฏ / ุชุตุฏูุฑ ุงูุจูุงูุงุช</h3>
        <textarea id="importExportTextarea" rows="10" placeholder="ุณูุธูุฑ ููุง JSON ุงูุจูุงูุงุช"></textarea>
        <div class="modal-actions">
          <button id="exportDataBtn">ุชุตุฏูุฑ</button>
          <button id="importDataBtn">ุงุณุชูุฑุงุฏ</button>
        </div>
      </div>
    </div>
  </div>

  <div id="sourceModal" class="modal">
    <div class="modal-card">
      <button class="modal-close" data-close="sourceModal">ร</button>
      <div class="modal-body">
        <h3>ุฅุถุงูุฉ ูุตุฏุฑ ุฌุฏูุฏ</h3>
        <label for="sourceTitleInput">ุนููุงู ุงููุต (ุงุฎุชูุงุฑู)</label>
        <input type="text" id="sourceTitleInput">
        <label for="sourceTextInput">ูุต ุงููุตุฏุฑ</label>
        <textarea id="sourceTextInput" rows="5"></textarea>
        <div class="modal-actions">
          <button id="saveNewSourceBtn">ุญูุธ ุงููุตุฏุฑ</button>
        </div>
      </div>
    </div>
  </div>

  <div id="tooltip" class="tooltip hidden"></div>

  <script>
    window.FIREBASE_DB_URL = 'https://sirahdata-default-rtdb.europe-west1.firebasedatabase.app/.json';
  </script>
  <script src="js/loader.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/smartlinks.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
