<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>السيرة النبوية - تحرير وحفظ</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="top-bar">
        <div class="app-version">الإصدار: v0.2.0</div>
        <div class="backup-controls">
            <button id="export-backup-btn">تصدير البيانات</button>
            <label class="import-backup-label">
                استيراد ملف
                <input type="file" id="import-backup-input" accept="application/json">
            </label>
        </div>
    </div>

    <div class="container">
        <!-- العمود الجانبي القابل للتحرير -->
        <aside id="sidebar-data" contenteditable="true" data-storage-key="sira_sidebar_data">
            <h3>السنة الأولى قبل الهجرة</h3>
            <ul>
                <li data-event-id="event_1_1">بدء نزول الوحي</li>
                <li data-event-id="event_1_2">إسلام خديجة</li>
            </ul>
        </aside>

        <main id="content-area">
            <div class="editor-toolbar">
                <button type="button" data-command="bold"><strong>غ</strong></button>
                <button type="button" data-command="italic"><em>م</em></button>
                <button type="button" data-command="underline"><u>خ</u></button>
                <button type="button" data-command="insertOrderedList">١.</button>
                <button type="button" data-command="insertUnorderedList">•</button>
                <button type="button" data-command="removeFormat">تنظيف</button>
                <label class="toolbar-color">
                    لون النص
                    <input type="color" id="text-color-picker" value="#000000">
                </label>
                <label class="toolbar-color">
                    تمييز
                    <input type="color" id="highlight-color-picker" value="#ffff00">
                </label>
            </div>
            <!-- منطقة المحتوى الرئيسية القابلة للتحرير -->
            <div id="editable-content" contenteditable="true" data-storage-key="sira_event_content">
                <p>اختر حدثاً من القائمة الجانبية للبدء، أو اكتب هنا مباشرة.</p>
            </div>
        </main>
    </div>

    <!-- Tooltip للعرض عند التحويم -->
    <div id="smart-tooltip" class="hidden">
        <div id="tooltip-content"></div>
    </div>

    <!-- Popover للتحرير عند النقر -->
    <div id="smart-editor-popover" class="hidden">
        <div class="popover-content">
            <span class="close-popover">&times;</span>
            <h3>تحرير الترجمة</h3>
            <label>العنوان:</label>
            <input type="text" id="popover-title">

            <label>المحتوى:</label>
            <textarea id="popover-content"></textarea>

            <label>الصورة:</label>
            <div class="file-input-container">
                <input type="file" id="popover-file" accept="image/*">
                <button id="remove-img-btn" style="display:none; color:red;">حذف الصورة</button>
            </div>
            <div id="popover-img-preview-container"></div>

            <div class="popover-footer">
                <button id="popover-save-btn">حفظ</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>
